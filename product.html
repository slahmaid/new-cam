<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prumysl Store - Loading...</title>
    <meta name="description" content="Ø£Ù‚ÙˆÙ‰ ÙƒØ§Ù…ÙŠØ±Ø§Øª Ø§Ù„Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ø´Ù…Ø³ÙŠØ© ÙÙŠ Ø§Ù„Ù…ØºØ±Ø¨.">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;900&display=swap" rel="stylesheet">
    <style>
        /* --- CORE VARIABLES --- */
        :root {
            --primary: #e6b800;
            --primary-glow: rgba(230, 184, 0, 0.4);
            --dark-bg: #050505;
            --card-bg: rgba(20, 20, 20, 0.6);
            --glass-border: rgba(255, 255, 255, 0.08);
            --text-main: #ffffff;
            --text-muted: #a0a0a0;
            --success: #2ecc71;
            --whatsapp: #25D366;
            --danger: #ff4757;
        }

        /* --- RESET & BASE --- */
        * { box-sizing: border-box; margin: 0; padding: 0; outline: none; -webkit-tap-highlight-color: transparent; }
        body { 
            font-family: 'Cairo', sans-serif; 
            background-color: var(--dark-bg); 
            color: var(--text-main); 
            overflow-x: hidden; 
            padding-bottom: 90px;
            line-height: 1.6;
        }

        /* Cinematic Noise & Glow */
        body::after {
            content: ""; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.05'/%3E%3C/svg%3E");
            pointer-events: none; z-index: 9000; opacity: 0.04;
        }
        .ambient-glow {
            position: fixed; width: 500px; height: 500px;
            background: radial-gradient(circle, var(--primary-glow) 0%, transparent 70%);
            border-radius: 50%; pointer-events: none; z-index: -1;
            filter: blur(100px); opacity: 0.15; top: 20%; right: -10%;
        }

        a { text-decoration: none; color: inherit; transition: 0.3s; }
        img { max-width: 100%; height: auto; display: block; }

        /* Scroll Progress */
        .scroll-progress {
            position: fixed; top: 70px; left: 0; width: 0%; height: 2px;
            background: var(--primary); z-index: 1001; transition: width 0.1s;
        }

        /* --- HEADER --- */
        .floating-header {
            position: fixed; top: 0; left: 0; right: 0; height: 70px; 
            background: rgba(5, 5, 5, 0.9); backdrop-filter: blur(20px);
            z-index: 1000; display: flex; justify-content: space-between; align-items: center; padding: 0 20px; 
            border-bottom: 1px solid var(--glass-border);
        }
        .logo { font-weight: 900; font-size: 1.4rem; text-transform: uppercase; letter-spacing: 1px; color: #fff; }
        .back-btn { font-weight: 700; font-size: 0.95rem; color: #ccc; display: flex; align-items: center; gap: 8px; transition: 0.3s; }
        .back-btn:hover { color: var(--primary); transform: translateX(-5px); }

        .breadcrumbs { max-width: 1200px; margin: 90px auto 20px; padding: 0 20px; font-size: 0.85rem; color: #666; }
        .breadcrumbs span { color: var(--primary); font-weight: 600; }

        /* --- MAIN LAYOUT --- */
        .product-container {
            max-width: 1200px; margin: 0 auto 60px; padding: 0 20px;
            display: grid; grid-template-columns: 1.2fr 0.8fr; gap: 50px; align-items: start;
        }

        /* --- GALLERY WITH ZOOM --- */
        .main-img-wrap {
            width: 100%; height: 500px; border-radius: 20px; overflow: hidden;
            border: 1px solid var(--glass-border); margin-bottom: 20px;
            background: rgba(255,255,255,0.02);
            display: flex; align-items: center; justify-content: center; position: relative;
            cursor: crosshair;
        }
        .main-img { 
            max-width: 90%; max-height: 90%; object-fit: contain; 
            transition: transform 0.2s ease-out; /* Smooth zoom movement */
        }
        /* Mobile: disable zoom effect */
        @media (hover: none) { .main-img-wrap { cursor: default; } }

        .thumbnails { display: flex; gap: 15px; overflow-x: auto; padding-bottom: 5px; scrollbar-width: none; }
        .thumb {
            width: 80px; height: 80px; object-fit: contain; border-radius: 12px; cursor: pointer; padding: 5px;
            border: 1px solid var(--glass-border); opacity: 0.6; transition: 0.3s; flex-shrink: 0;
            background: rgba(255,255,255,0.03);
        }
        .thumb:hover, .thumb.active { border-color: var(--primary); opacity: 1; transform: translateY(-2px); box-shadow: 0 5px 15px rgba(0,0,0,0.5); }

        /* --- INFO SECTION --- */
        .product-category { color: var(--primary); font-weight: 800; font-size: 0.8rem; text-transform: uppercase; letter-spacing: 2px; display: block; margin-bottom: 5px; opacity: 0.9; }
        .product-title { font-size: 2.4rem; font-weight: 900; margin: 0 0 10px; line-height: 1.2; color: #fff; }
        
        .social-proof-banner {
            background: rgba(46, 204, 113, 0.1); border: 1px solid rgba(46, 204, 113, 0.2);
            color: var(--success); font-size: 0.85rem; padding: 5px 12px; border-radius: 6px;
            display: inline-flex; align-items: center; gap: 6px; margin-bottom: 20px; font-weight: 600;
        }
        .live-dot { width: 8px; height: 8px; background: var(--success); border-radius: 50%; animation: blink 1.5s infinite; }
        @keyframes blink { 0% { opacity: 0.4; } 50% { opacity: 1; } 100% { opacity: 0.4; } }

        /* Offer Selector */
        .offers-container { display: none; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 25px; }
        .offer-option {
            border: 1px solid var(--glass-border); border-radius: 12px; padding: 15px; cursor: pointer;
            text-align: center; transition: 0.3s; background: rgba(30,30,30,0.4); color: #fff;
        }
        .offer-option:hover { border-color: #666; background: rgba(40,40,40,0.6); }
        .offer-option.selected { 
            border-color: var(--primary); background: rgba(230, 184, 0, 0.1); 
            box-shadow: 0 0 20px rgba(230,184,0,0.1); position: relative;
        }
        .offer-price-tag { font-weight: 800; color: var(--primary); display: block; margin-top: 5px; font-size: 1.1rem; }

        .price-box { display: flex; align-items: center; gap: 15px; margin-bottom: 25px; flex-wrap: wrap; }
        .current-price { font-size: 2.2rem; font-weight: 900; color: #fff; text-shadow: 0 0 20px rgba(230,184,0,0.3); }
        .old-price { text-decoration: line-through; color: #666; font-size: 1.3rem; }
        .discount-tag { 
            background: rgba(255, 71, 87, 0.15); color: var(--danger); padding: 4px 10px; 
            border-radius: 4px; border: 1px solid rgba(255, 71, 87, 0.3); font-weight: 700; font-size: 0.85rem; 
        }

        /* Urgency Timer */
        .timer-box {
            background: linear-gradient(90deg, rgba(230, 184, 0, 0.1), transparent);
            padding: 12px 20px; border-radius: 8px; margin-bottom: 30px;
            font-weight: 700; display: flex; align-items: center; gap: 15px;
            border-right: 4px solid var(--primary);
        }
        .countdown-digits { font-family: monospace; font-size: 1.3rem; font-weight: 800; color: var(--primary); margin-right: auto; }

        /* --- ORDER CARD (The Converter) --- */
        .order-card {
            background: rgba(20, 20, 20, 0.8); backdrop-filter: blur(20px);
            padding: 30px; border-radius: 20px; border: 1px solid var(--glass-border);
            box-shadow: 0 20px 60px rgba(0,0,0,0.4); position: relative; overflow: hidden;
        }
        .order-card::before {
            content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 2px;
            background: linear-gradient(90deg, transparent, var(--primary), transparent);
        }
        .order-header { text-align: center; margin-bottom: 20px; padding-bottom: 15px; border-bottom: 1px dashed #333; }
        .order-header h4 { color: #fff; margin-bottom: 5px; font-size: 1.2rem; }
        
        .form-input {
            width: 100%; padding: 14px; border: 1px solid #333; border-radius: 10px;
            font-family: inherit; font-size: 1rem; transition: 0.3s; background: #0a0a0a; color: #fff; margin-bottom: 12px;
        }
        .form-input:focus { border-color: var(--primary); outline: none; box-shadow: 0 0 15px rgba(230,184,0,0.1); }
        
        .submit-btn {
            width: 100%; background: var(--primary); color: #000; padding: 16px;
            font-size: 1.1rem; font-weight: 800; border: none; border-radius: 10px;
            cursor: pointer; transition: 0.3s; box-shadow: 0 10px 30px rgba(230,184,0,0.2);
            position: relative; overflow: hidden; display: flex; align-items: center; justify-content: center; gap: 10px;
        }
        .submit-btn:hover { transform: translateY(-3px); box-shadow: 0 20px 40px rgba(230,184,0,0.4); }
        
        .wa-link {
            text-align: center; display: block; margin-top: 15px; font-size: 0.9rem; color: #888;
        }
        .wa-link a { color: var(--whatsapp); font-weight: 700; text-decoration: underline; }

        /* --- TABS --- */
        .tabs-header { display: flex; border-bottom: 1px solid #333; margin-bottom: 30px; margin-top: 40px; overflow-x: auto; scrollbar-width: none; }
        .tab-btn {
            padding: 15px 30px; background: none; border: none; font-family: inherit;
            font-size: 1rem; font-weight: 700; color: #666; cursor: pointer;
            border-bottom: 2px solid transparent; transition: 0.3s; white-space: nowrap;
        }
        .tab-btn:hover { color: #ccc; }
        .tab-btn.active { color: #fff; border-bottom-color: var(--primary); }
        
        .tab-content { display: none; color: #ccc; line-height: 1.8; animation: fadeIn 0.4s; font-size: 1rem; }
        .tab-content.active { display: block; }
        .specs-table { width: 100%; border-collapse: collapse; margin-top: 10px; }
        .specs-table tr:nth-child(odd) { background: rgba(255,255,255,0.02); }
        .specs-table th { width: 30%; color: #fff; padding: 12px; text-align: right; border-bottom: 1px solid #222; font-weight: 600; }
        .specs-table td { padding: 12px; border-bottom: 1px solid #222; text-align: right; color: #aaa; }

        /* --- RELATED PRODUCTS --- */
        .related-section { background: #080808; padding: 60px 20px 100px; border-top: 1px solid var(--glass-border); }
        .related-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); gap: 25px; max-width: 1200px; margin: 0 auto; }
        .r-card { background: var(--card-bg); border-radius: 16px; overflow: hidden; border: 1px solid var(--glass-border); transition: 0.3s; }
        .r-card:hover { transform: translateY(-5px); border-color: var(--primary); }
        .r-img-wrap { width: 100%; height: 220px; background: rgba(255,255,255,0.02); padding: 20px; display: flex; align-items: center; justify-content: center; }
        .r-info { padding: 15px; }
        .r-title { color: #fff; font-weight: 700; font-size: 1rem; margin-bottom: 5px; }
        .r-price { color: var(--primary); font-weight: 800; font-size: 1.1rem; }

        /* --- MOBILE STICKY BAR --- */
        .mobile-sticky-bar {
            display: none; position: fixed; bottom: 0; left: 0; right: 0; background: rgba(10,10,10,0.95);
            backdrop-filter: blur(15px); padding: 12px 20px; border-top: 1px solid #333; z-index: 1100;
            justify-content: space-between; align-items: center; gap: 15px;
            box-shadow: 0 -10px 30px rgba(0,0,0,0.5); padding-bottom: max(12px, env(safe-area-inset-bottom));
        }
        .m-price { color: #fff; font-weight: 900; font-size: 1.4rem; }
        .m-btn { 
            background: var(--primary); color: #000; padding: 12px; border-radius: 8px; 
            flex-grow: 1; text-align: center; font-weight: 800; font-size: 1rem; 
            box-shadow: 0 0 15px rgba(230,184,0,0.3);
        }
        .m-wa-btn { 
            background: #1a1a1a; border: 1px solid var(--whatsapp); color: var(--whatsapp); 
            padding: 10px; border-radius: 8px; display: flex; align-items: center; justify-content: center; width: 50px; 
        }

        /* --- RESPONSIVE --- */
        @media (max-width: 900px) {
            .product-container { grid-template-columns: 1fr; gap: 30px; margin-top: 20px; }
            .mobile-sticky-bar { display: flex; }
            .related-grid { grid-template-columns: repeat(2, 1fr); gap: 10px; }
            .main-img-wrap { height: 350px; }
            .thumbnails { justify-content: flex-start; }
            .price-box { gap: 10px; }
            .current-price { font-size: 2rem; }
            body { padding-bottom: 80px; }
        }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

    <div class="scroll-progress" id="scrollProgress"></div>
    <div class="ambient-glow"></div>

    <header class="floating-header">
        <a href="index.html" class="back-btn">&#8594; Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ù…ØªØ¬Ø±</a>
        <div class="logo">Prumysl</div>
        <div style="width: 80px;"></div>
    </header>

    <div class="breadcrumbs">
        Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© / ÙƒØ§Ù…ÙŠØ±Ø§Øª Ø§Ù„Ù…Ø±Ø§Ù‚Ø¨Ø© / <span id="bread-title">...</span>
    </div>

    <div class="product-container">
        
        <div class="product-gallery">
            <div class="main-img-wrap" id="zoom-container">
                <img id="main-img" src="" alt="Product Image" class="main-img" onerror="this.src='https://placehold.co/600x600/222/e6b800?text=Prumysl+Secure'">
            </div>
            <div class="thumbnails" id="thumbs-container"></div>
        </div>

        <div class="product-info">
            <span class="product-category">INDUSTRIAL GRADE SECURITY</span>
            <h1 id="p-title" class="product-title">...</h1>
            
            <div class="social-proof-banner">
                <span class="live-dot"></span>
                <span id="view-counter">12</span> Ø´Ø®Øµ ÙŠØ´Ø§Ù‡Ø¯ÙˆÙ† Ù‡Ø°Ø§ Ø§Ù„Ù…Ù†ØªØ¬ Ø­Ø§Ù„ÙŠØ§Ù‹
            </div>
            
            <div id="offers-container" class="offers-container"></div>

            <div class="price-box">
                <span id="p-price" class="current-price">...</span>
                <span id="p-old-price" class="old-price">...</span>
                <span class="discount-tag">ØªÙˆÙÙŠØ± 20%</span>
            </div>

            <div class="timer-box">
                <span>âš¡ Ø¹Ø±Ø¶ Ù…Ø­Ø¯ÙˆØ¯ ÙŠÙ†ØªÙ‡ÙŠ Ø®Ù„Ø§Ù„:</span>
                <span class="countdown-digits" id="countdown">04:59:00</span>
            </div>

            <p id="p-desc" style="color:#bbb; line-height:1.8; margin-bottom:30px; font-size:1.05rem;">...</p>

            <div class="order-card" id="orderForm">
                <div class="order-header">
                    <h4>Ø£Ø·Ù„Ø¨ Ø§Ù„Ø¢Ù† ÙˆØ§Ù„Ø¯ÙØ¹ Ø¹Ù†Ø¯ Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù…</h4>
                    <p style="font-size:0.85rem; color:#888;">Ø§Ù„ØªÙˆØµÙŠÙ„ Ù…Ø¬Ø§Ù†ÙŠ ÙˆØ³Ø±ÙŠØ¹ Ù„Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø¯Ù† ğŸ‡²ğŸ‡¦</p>
                </div>
                <form onsubmit="sendToWhatsApp(event)">
                    <input type="text" id="order-name" class="form-input" placeholder="Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„" required>
                    <input type="text" id="order-city" class="form-input" placeholder="Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©" required>
                    <input type="tel" id="order-phone" class="form-input" placeholder="Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ (06...)" required>
                    <input type="hidden" id="selected-variant" name="variant" value="">
                    
                    <button type="submit" class="submit-btn">
                        <span>Ø§Ø¶ØºØ· Ù‡Ù†Ø§ Ù„Ù„Ø·Ù„Ø¨</span>
                        <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor"><path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/></svg>
                    </button>
                </form>
                <div class="wa-link">
                    Ù‡Ù„ Ù„Ø¯ÙŠÙƒ Ø³Ø¤Ø§Ù„ØŸ <a href="#" id="wa-help-btn" target="_blank">ØªØ­Ø¯Ø« Ù…Ø¹Ù†Ø§ Ø¹Ø¨Ø± Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨</a>
                </div>
            </div>
        </div>
    </div>

    <div class="product-container" style="display:block; margin-bottom:40px;">
        <div class="tabs-header">
            <button class="tab-btn active" onclick="switchTab('desc')">Ø§Ù„ÙˆØµÙ Ø§Ù„ÙƒØ§Ù…Ù„</button>
            <button class="tab-btn" onclick="switchTab('specs')">Ø§Ù„Ù…ÙˆØ§ØµÙØ§Øª Ø§Ù„ØªÙ‚Ù†ÙŠØ©</button>
            <button class="tab-btn" onclick="switchTab('shipping')">Ø§Ù„Ø´Ø­Ù† ÙˆØ§Ù„Ø¶Ù…Ø§Ù†</button>
        </div>
        <div id="tab-desc" class="tab-content active"><p id="full-desc-text">...</p></div>
        <div id="tab-specs" class="tab-content"><table class="specs-table"><tbody id="specs-body"></tbody></table></div>
        <div id="tab-shipping" class="tab-content">
            <div style="background:rgba(255,255,255,0.03); padding:20px; border-radius:12px;">
                <p style="margin-bottom:15px;"><strong>ğŸ“¦ Ø§Ù„ØªÙˆØµÙŠÙ„ Ø§Ù„Ø³Ø±ÙŠØ¹:</strong> ÙŠØªÙ… Ø§Ù„ØªÙˆØµÙŠÙ„ Ø®Ù„Ø§Ù„ 24 Ø¥Ù„Ù‰ 48 Ø³Ø§Ø¹Ø© ÙÙŠ Ø§Ù„Ù…Ø¯Ù† Ø§Ù„ÙƒØ¨Ø±Ù‰ (Ø§Ù„Ø¯Ø§Ø± Ø§Ù„Ø¨ÙŠØ¶Ø§Ø¡ØŒ Ø§Ù„Ø±Ø¨Ø§Ø·ØŒ Ø·Ù†Ø¬Ø©ØŒ Ù…Ø±Ø§ÙƒØ´ØŒ Ø£ÙƒØ§Ø¯ÙŠØ±) Ùˆ 3 Ø£ÙŠØ§Ù… Ù„Ø¨Ø§Ù‚ÙŠ Ø§Ù„Ù…Ù†Ø§Ø·Ù‚.</p>
                <p style="margin-bottom:15px;"><strong>ğŸ›¡ï¸ Ø¶Ù…Ø§Ù† Ø§Ù„Ø¬ÙˆØ¯Ø©:</strong> Ø¬Ù…ÙŠØ¹ Ù…Ù†ØªØ¬Ø§Øª Prumysl ØªØ£ØªÙŠ Ù…Ø¹ Ø¶Ù…Ø§Ù† Ø´Ø§Ù…Ù„ Ù„Ù…Ø¯Ø© Ø³Ù†Ø© ÙƒØ§Ù…Ù„Ø© Ø¶Ø¯ Ø¹ÙŠÙˆØ¨ Ø§Ù„ØªØµÙ†ÙŠØ¹.</p>
                <p><strong>ğŸ’° Ø§Ù„Ø¯ÙØ¹:</strong> Ø§Ù„Ø¯ÙØ¹ Ù†Ù‚Ø¯Ø§Ù‹ Ø¹Ù†Ø¯ Ø§Ø³ØªÙ„Ø§Ù… Ø§Ù„Ù…Ù†ØªØ¬ ÙˆØ§Ù„ØªØ£ÙƒØ¯ Ù…Ù†Ù‡.</p>
            </div>
        </div>
    </div>

    <section class="related-section">
        <h2 style="color:#fff; text-align:center; margin-bottom:40px; font-weight:900; font-size:1.8rem;">Ù…Ù†ØªØ¬Ø§Øª Ù‚Ø¯ ØªØ¹Ø¬Ø¨Ùƒ Ø£ÙŠØ¶Ø§Ù‹</h2>
        <div class="related-grid" id="related-grid"></div>
    </section>

    <div class="mobile-sticky-bar">
        <div>
            <div style="font-size:0.75rem; color:#888;">Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ</div>
            <div id="m-price" class="m-price">...</div>
        </div>
        <div style="display:flex; gap:10px; flex-grow:1; justify-content: flex-end;">
            <a href="#" id="wa-btn-mobile" class="m-wa-btn" aria-label="WhatsApp">
                <svg viewBox="0 0 32 32" style="fill:currentColor; width:24px;"><path d="M16 2C8.269 2 2 8.269 2 16c0 2.485.643 4.821 1.764 6.845L2.1 29.9l7.247-1.62C11.306 29.357 13.585 30 16 30c7.731 0 14-6.269 14-14S23.731 2 16 2zm0 25.867c-2.14 0-4.162-.57-5.918-1.564l-.424-.24-4.398.983 1.01-4.29-.264-.442A11.82 11.82 0 014.133 16c0-6.543 5.324-11.867 11.867-11.867S27.867 9.457 27.867 16 22.543 27.867 16 27.867z"/></svg>
            </a>
            <a href="#orderForm" class="m-btn">Ø§Ø·Ù„Ø¨ Ø§Ù„Ø¢Ù†</a>
        </div>
    </div>

    <script>
        // --- 1. PRODUCT DATABASE ---
        // Kept simple for a file-based system. In production, fetch from JSON.
        const products = {
            1: { 
                title: "Prumysl Omni-Guard 360Â°", 
                price: "1200 DH", oldPrice: "1500 DH", 
                desc: "ÙƒØ§Ù…ÙŠØ±Ø§ Ø´Ù…Ø³ÙŠØ© 4G Ø«Ù„Ø§Ø«ÙŠØ© Ø§Ù„Ø¹Ø¯Ø³Ø§Øª PTZØŒ Ø¨Ø¯Ù‚Ø© 15 Ù…ÙŠØºØ§Ø¨ÙƒØ³ÙŠÙ„ØŒ 3 Ø´Ø§Ø´Ø§Øª Ø­ÙŠØ© ÙˆÙ…Ø±Ø§Ù‚Ø¨Ø© 360Â°.", 
                fullDesc: "Ø§Ù„Ø­Ù„ Ø§Ù„Ø£Ù…Ù†ÙŠ Ø§Ù„Ù…ØªÙƒØ§Ù…Ù„ Ù„Ù„Ø¶ÙŠØ¹Ø§Øª ÙˆØ§Ù„Ù…ØµØ§Ù†Ø¹ Ø§Ù„ÙƒØ¨ÙŠØ±Ø©. ÙƒØ§Ù…ÙŠØ±Ø§ Omni-Guard ØªÙˆÙØ± ØªØºØ·ÙŠØ© Ø´Ø§Ù…Ù„Ø© Ø¨ÙØ¶Ù„ Ø«Ù„Ø§Ø« Ø¹Ø¯Ø³Ø§Øª ØªØ¹Ù…Ù„ ÙÙŠ Ø¢Ù† ÙˆØ§Ø­Ø¯ØŒ Ù…Ù…Ø§ ÙŠÙ„ØºÙŠ Ø§Ù„Ù†Ù‚Ø§Ø· Ø§Ù„Ø¹Ù…ÙŠØ§Ø¡ ØªÙ…Ø§Ù…Ø§Ù‹. ØªØ£ØªÙŠ Ù…Ø¹ ØªØ·Ø¨ÙŠÙ‚ Ø³Ù‡Ù„ Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… ÙŠØ¯Ø¹Ù… Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª Ø§Ù„ÙÙˆØ±ÙŠØ©.", 
                images: ["img/Prumysl Omni-Guard 360Â°/Prumysl Omni-Guard 360Â°-main.jpg", "img/Prumysl Omni-Guard 360Â°/Prumysl Omni-Guard 360Â°-thumb-2.jpg", "img/Prumysl Omni-Guard 360Â°.jpg"], 
                specs: { "Ø§Ù„Ø¯Ù‚Ø©": "15 MP (3x5MP)", "Ø§Ù„Ø¨Ø·Ø§Ø±ÙŠØ©": "8000 mAh Industrial", "Ø§Ù„Ø§ØªØµØ§Ù„": "4G / LTE (Sim Card)", "Ø§Ù„Ù„ÙˆØ­ Ø§Ù„Ø´Ù…Ø³ÙŠ": "16W High Efficiency", "Ø§Ù„Ø±Ø¤ÙŠØ© Ø§Ù„Ù„ÙŠÙ„ÙŠØ©": "Color + IR (30m)" } 
            },
            2: { 
                title: "Prumysl Vision 6K Pro", 
                price: "1100 DH", oldPrice: "1350 DH", 
                desc: "ÙƒØ§Ù…ÙŠØ±Ø§ Ø´Ù…Ø³ÙŠØ© Ø«Ù„Ø§Ø«ÙŠØ© Ø§Ù„Ø¹Ø¯Ø³Ø§Øª 4GØŒ Ø¯Ù‚Ø© 6K ÙˆØ²ÙˆÙˆÙ… Ø±Ù‚Ù…ÙŠ 10X. Ø±Ø¤ÙŠØ© ÙØ§Ø¦Ù‚Ø© Ø§Ù„ÙˆØ¶ÙˆØ­.", 
                fullDesc: "Ø¯Ù‚Ø© 6K ØªØ¹Ù†ÙŠ ØªÙØ§ØµÙŠÙ„ Ù„Ø§ Ù…Ø«ÙŠÙ„ Ù„Ù‡Ø§. Ø³ÙˆØ§Ø¡ ÙƒÙ†Øª ØªØ±Ø§Ù‚Ø¨ Ø§Ù„Ù…Ø®Ø§Ø²Ù† Ø£Ùˆ Ø§Ù„Ù…Ø¯Ø§Ø®Ù„ØŒ Ø³ØªØ­ØµÙ„ Ø¹Ù„Ù‰ ØµÙˆØ±Ø© Ù†Ù‚ÙŠØ©. Ø§Ù„Ø²ÙˆÙˆÙ… Ø§Ù„Ø±Ù‚Ù…ÙŠ 10X ÙŠØ³Ù…Ø­ Ù„Ùƒ Ø¨Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ÙˆØ¬ÙˆÙ‡ ÙˆØ£Ø±Ù‚Ø§Ù… Ø§Ù„Ø³ÙŠØ§Ø±Ø§Øª Ø¨Ø³Ù‡ÙˆÙ„Ø©.", 
                images: ["img/Prumysl Vision 6K Pro/Prumysl Vision 6K Pro-main.jpg", "img/Prumysl Vision 6K Pro/Prumysl Vision 6K Pro-thumb-1.jpg", "img/Prumysl Vision 6K Pro/Prumysl Vision 6K Pro-thumb-2.jpg"], 
                specs: { "Ø§Ù„Ø¯Ù‚Ø©": "6K Ultra HD", "Ø§Ù„Ø²ÙˆÙˆÙ…": "10X Hybrid Zoom", "Ø§Ù„Ø¨Ø·Ø§Ø±ÙŠØ©": "8000 mAh", "Ø§Ù„Ø¹Ø¯Ø³Ø§Øª": "Triple Lens System", "Ø§Ù„ØªØ®Ø²ÙŠÙ†": "SD Card / Cloud" } 
            },
            3: { 
                title: "Prumysl Euro-Shield", 
                price: "899 DH", oldPrice: "1100 DH", 
                desc: "Ù†Ø³Ø®Ø© Ø£ÙˆØ±ÙˆØ¨ÙŠØ© Ù…ØªØ·ÙˆØ±Ø©ØŒ Ù„ÙˆØ­ÙŠÙ† Ù„Ù„Ø·Ø§Ù‚Ø© ÙˆØ¨Ø·Ø§Ø±ÙŠØ© Ù…Ø¯Ù…Ø¬Ø©. ØªØµÙ…ÙŠÙ… Ø£Ù†ÙŠÙ‚ Ù„Ù„ÙÙ„Ù„.", 
                fullDesc: "ØªØµÙ…ÙŠÙ… Ø£ÙˆØ±ÙˆØ¨ÙŠ Ù…Ø¯Ù…Ø¬ ÙˆØ£Ù†ÙŠÙ‚ Ù„Ø§ ÙŠØ´ÙˆÙ‡ Ù…Ù†Ø¸Ø± Ø§Ù„ÙÙŠÙ„Ø§ Ø£Ùˆ Ø§Ù„Ù…Ù†Ø²Ù„. Ù…Ø²ÙˆØ¯Ø© Ø¨Ù„ÙˆØ­ÙŠÙ† Ø´Ù…Ø³ÙŠÙŠÙ† Ù„Ø¶Ù…Ø§Ù† Ø§Ù„Ø´Ø­Ù† Ø­ØªÙ‰ ÙÙŠ Ø§Ù„Ø£ÙŠØ§Ù… Ø§Ù„ØºØ§Ø¦Ù…Ø©. Ø¨Ø·Ø§Ø±ÙŠØ© Ù…Ø¯Ù…Ø¬Ø© ØªØ¯ÙˆÙ… Ø·ÙˆÙŠÙ„Ø§Ù‹.", 
                images: ["img/Prumysl Euro-Shield/Prumysl Euro-Shield-main.jpg", "img/Prumysl Euro-Shield/Prumysl Euro-Shield-thumb-1.jpg", "img/Prumysl Euro-Shield/Prumysl Euro-Shield-thumb-2.jpg"], 
                specs: { "Ø§Ù„ØªØµÙ…ÙŠÙ…": "Compact Euro Design", "Ø§Ù„Ø·Ø§Ù‚Ø©": "Dual Panel Technology", "Ø§Ù„Ø¨Ø·Ø§Ø±ÙŠØ©": "Built-in Long Life", "Ø§Ù„Ø§ØªØµØ§Ù„": "4G / LTE", "Ù…Ù‚Ø§ÙˆÙ…Ø© Ø§Ù„Ù…Ø§Ø¡": "IP66 Certified" } 
            },
            4: { 
                title: "Prumysl Duo 18W", 
                price: "699 DH", oldPrice: "850 DH", 
                desc: "ÙƒØ§Ù…ÙŠØ±Ø§ Ø«Ù†Ø§Ø¦ÙŠØ© Ø§Ù„Ø¹Ø¯Ø³Ø© Ù…Ù†Ø®ÙØ¶Ø© Ø§Ù„Ø§Ø³ØªÙ‡Ù„Ø§ÙƒØŒ 15MP ÙˆÙ„ÙˆØ­ÙŠÙ† 18W.", 
                fullDesc: "Ø§Ù„Ø®ÙŠØ§Ø± Ø§Ù„Ø§Ù‚ØªØµØ§Ø¯ÙŠ Ø§Ù„Ø£ÙØ¶Ù„. ÙƒØ§Ù…ÙŠØ±Ø§ Ø¨Ø¹Ø¯Ø³ØªÙŠÙ† ØªÙˆÙØ± Ø²Ø§ÙˆÙŠØ© Ø±Ø¤ÙŠØ© ÙˆØ§Ø³Ø¹Ø© Ø¬Ø¯Ø§Ù‹. Ø§Ø³ØªÙ‡Ù„Ø§Ùƒ Ù…Ù†Ø®ÙØ¶ Ù„Ù„Ø·Ø§Ù‚Ø© ÙŠØ¬Ø¹Ù„Ù‡Ø§ ØªØ¹Ù…Ù„ Ù„Ø£Ø³Ø§Ø¨ÙŠØ¹ Ø¨Ø¯ÙˆÙ† Ø´Ù…Ø³ Ù‚ÙˆÙŠØ©.", 
                images: ["img/Prumysl Duo 18W/Prumysl Duo 18W-main.jpg", "img/Prumysl Duo 18W/Prumysl Duo 18W-thumb-1.jpg", "img/Prumysl Duo 18W/Prumysl Duo 18W-thumb-2.jpg"], 
                specs: { "Ø§Ù„Ø·Ø§Ù‚Ø©": "18W Split Panel", "Ø§Ù„Ù†ÙˆØ¹": "Dual Lens PTZ", "Ø§Ù„Ø¯Ù‚Ø©": "15 MP", "Ø§Ù„Ø¨Ø·Ø§Ø±ÙŠØ©": "8000 mAh", "Ø§Ù„Ù…Ø³ØªØ´Ø¹Ø±": "PIR Motion Sensor" } 
            },
            5: { 
                title: "Prumysl Falcon 36X", 
                price: "2800 DH", oldPrice: "3400 DH", 
                desc: "Ø§Ù„ÙˆØ­Ø´ Ø§Ù„ØµÙ†Ø§Ø¹ÙŠ: 24 Ù…ÙŠØºØ§Ø¨ÙƒØ³Ù„ØŒ Ø²ÙˆÙˆÙ… Ø¨ØµØ±ÙŠ 36X ÙˆØ¨Ø·Ø§Ø±ÙŠØ© 12000mAh.", 
                fullDesc: "Ù…Ø®ØµØµØ© Ù„Ù„Ù…Ø³Ø§Ø­Ø§Øª Ø§Ù„Ø´Ø§Ø³Ø¹Ø© Ø¬Ø¯Ø§Ù‹. Ø§Ù„Ø²ÙˆÙˆÙ… Ø§Ù„Ø¨ØµØ±ÙŠ 36X (Optical Zoom) ÙŠØ­Ø§ÙØ¸ Ø¹Ù„Ù‰ Ø¬ÙˆØ¯Ø© Ø§Ù„ØµÙˆØ±Ø© ØªÙ…Ø§Ù…Ø§Ù‹ Ø¹Ù†Ø¯ Ø§Ù„ØªÙ‚Ø±ÙŠØ¨. Ø¬Ø³Ù… Ù…Ø¹Ø¯Ù†ÙŠ ØµÙ„Ø¨ Ù…Ù‚Ø§ÙˆÙ… Ù„Ø£Ù‚Ø³Ù‰ Ø§Ù„Ø¸Ø±ÙˆÙ Ø§Ù„Ù…Ù†Ø§Ø®ÙŠØ©.", 
                images: ["img/Prumysl Falcon 36X/Prumysl Falcon 36X-main.jpg", "img/Prumysl Falcon 36X/Prumysl Falcon 36X-thumb-1.jpg", "img/Prumysl Falcon 36X/Prumysl Falcon 36X-thumb-2.jpg"], 
                specs: { "Ø§Ù„Ø²ÙˆÙˆÙ…": "36X Optical Real Zoom", "Ø§Ù„Ø¨Ø·Ø§Ø±ÙŠØ©": "12000 mAh Massive", "Ø§Ù„Ù‡ÙŠÙƒÙ„": "Full Metal Alloy", "Ø§Ù„Ø¯Ù‚Ø©": "24 MP", "Ø§Ù„Ù…Ø¯Ù‰": "Up to 1KM detection" } 
            },
            'batteries': { 
                title: "Ø¨Ø·Ø§Ø±ÙŠØ§Øª ØµÙ†Ø§Ø¹ÙŠØ© Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„Ø´Ø­Ù†", 
                price: "149 DH", oldPrice: "199 DH", 
                desc: "Ø¨Ø·Ø§Ø±ÙŠØ§Øª Ù„ÙŠØ«ÙŠÙˆÙ… Ø¹Ø§Ù„ÙŠØ© Ø§Ù„Ø¬ÙˆØ¯Ø© ØªØ¯ÙˆÙ… Ø·ÙˆÙŠÙ„Ø§Ù‹.", 
                fullDesc: "Ù„Ø§ ØªØ®Ø§Ø·Ø± Ø¨ØªÙˆÙ‚Ù Ø£Ø¬Ù‡Ø²ØªÙƒ. Ø¨Ø·Ø§Ø±ÙŠØ§Øª Prumysl Ø§Ù„ØµÙ†Ø§Ø¹ÙŠØ© ØªÙˆÙØ± Ø§Ø³ØªÙ‚Ø±Ø§Ø±Ø§Ù‹ ÙÙŠ Ø§Ù„Ø¬Ù‡Ø¯ ÙˆØ¹Ù…Ø±Ø§Ù‹ Ø§ÙØªØ±Ø§Ø¶ÙŠØ§Ù‹ Ø£Ø·ÙˆÙ„ Ø¨Ù€ 3 Ù…Ø±Ø§Øª Ù…Ù† Ø§Ù„Ø¨Ø·Ø§Ø±ÙŠØ§Øª Ø§Ù„Ø¹Ø§Ø¯ÙŠØ©.", 
                images: ["img/Rechargeable-batteries.png", "img/OFFER-1.jpg", "img/OFFER-2.jpg"], 
                specs: { "Ø§Ù„Ù†ÙˆØ¹": "Lithium Ion 21700", "Ø§Ù„Ø³Ø¹Ø©": "5100 mWh", "Ø¯ÙˆØ±Ø© Ø§Ù„Ø­ÙŠØ§Ø©": "1000+ Cycles", "Ø§Ù„Ø´Ø­Ù†": "USB-C Direct Port" }, 
                offers: [
                    {title:"2 Ù‚Ø·Ø¹ (2 Pieces)", price:"149 DH", oldPrice:"199 DH", img:"img/OFFER-1.jpg"}, 
                    {title:"4 Ù‚Ø·Ø¹ (4 Pieces)", price:"249 DH", oldPrice:"350 DH", img:"img/OFFER-2.jpg"}
                ] 
            }
        };

        // --- 2. INITIALIZATION ---
        const params = new URLSearchParams(window.location.search);
        let pid = params.get('id') || 1;
        let p = products[pid];

        if(p) {
            // SEO & Titles
            document.title = p.title + " | Prumysl Store";
            document.getElementById('p-title').innerText = p.title;
            document.getElementById('bread-title').innerText = p.title;
            document.getElementById('p-desc').innerText = p.desc;
            document.getElementById('full-desc-text').innerText = p.fullDesc;
            
            // Random Live Viewers (Social Proof)
            document.getElementById('view-counter').innerText = Math.floor(Math.random() * (25 - 8 + 1) + 8);

            // WhatsApp Help Links
            const waHelpLink = `https://wa.me/212600000000?text=${encodeURIComponent("Ø§Ù„Ø³Ù„Ø§Ù… Ø¹Ù„ÙŠÙƒÙ…ØŒ Ø¹Ù†Ø¯ÙŠ Ø§Ø³ØªÙØ³Ø§Ø± Ø¨Ø®ØµÙˆØµ: " + p.title)}`;
            document.getElementById('wa-help-btn').href = waHelpLink;
            document.getElementById('wa-btn-mobile').href = waHelpLink;

            // Handle Offers (Batteries) vs Single Products
            const offersDiv = document.getElementById('offers-container');
            if(p.offers) {
                offersDiv.style.display = 'grid';
                p.offers.forEach((offer, i) => {
                    offersDiv.innerHTML += `
                        <div class="offer-option ${i===0?'selected':''}" onclick="selectOffer(this, '${offer.price}', '${offer.oldPrice}', '${offer.img}', '${offer.title}')">
                            <span style="font-size:0.9rem">${offer.title}</span>
                            <span class="offer-price-tag">${offer.price}</span>
                        </div>`;
                    if(i===0) {
                        updateDisplay(offer.price, offer.oldPrice, offer.img);
                        document.getElementById('selected-variant').value = offer.title;
                    }
                });
            } else {
                updateDisplay(p.price, p.oldPrice, p.images[0]);
                document.getElementById('selected-variant').value = "Standard";
            }

            // Populate Specs Table
            for(const [k,v] of Object.entries(p.specs)) {
                document.getElementById('specs-body').innerHTML += `<tr><th>${k}</th><td>${v}</td></tr>`;
            }

            // Populate Related Products (Grid)
            let c = 0;
            for(const [k, rp] of Object.entries(products)) {
                if(k != pid && c < 4) {
                    let img = rp.offers ? rp.offers[0].img : rp.images[0];
                    document.getElementById('related-grid').innerHTML += `
                        <div class="r-card">
                            <a href="product.html?id=${k}">
                                <div class="r-img-wrap"><img src="${img}" alt="${rp.title}" loading="lazy" onerror="this.src='https://placehold.co/400x400/222/e6b800?text=Product'"></div>
                                <div class="r-info">
                                    <div class="r-title">${rp.title}</div>
                                    <div class="r-price">${rp.price}</div>
                                </div>
                            </a>
                        </div>`;
                    c++;
                }
            }

            // Populate Thumbnails
            if(p.images && p.images.length > 0 && !p.offers) {
                p.images.forEach((img, idx) => {
                    document.getElementById('thumbs-container').innerHTML += 
                        `<img src="${img}" class="thumb ${idx===0?'active':''}" onclick="changeImg(this, '${img}')" onerror="this.src='https://placehold.co/400x400/222/e6b800?text=Thumb'">`;
                });
            }
        }

        // --- 3. INTERACTION FUNCTIONS ---

        function updateDisplay(price, old, img) {
            document.getElementById('p-price').innerText = price;
            document.getElementById('m-price').innerText = price;
            document.getElementById('p-old-price').innerText = old;
            document.getElementById('main-img').src = img;
        }

        function selectOffer(el, price, old, img, title) {
            document.querySelectorAll('.offer-option').forEach(d => d.classList.remove('selected'));
            el.classList.add('selected');
            updateDisplay(price, old, img);
            document.getElementById('selected-variant').value = title;
        }

        function changeImg(el, src) {
            document.querySelectorAll('.thumb').forEach(t => t.classList.remove('active'));
            el.classList.add('active');
            const mainImg = document.getElementById('main-img');
            mainImg.style.opacity = 0;
            setTimeout(() => {
                mainImg.src = src;
                mainImg.style.opacity = 1;
            }, 200);
        }

        function switchTab(t) {
            document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
            event.target.classList.add('active');
            document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
            document.getElementById('tab-'+t).classList.add('active');
        }

        // --- 4. WHATSAPP ORDER LOGIC (High Conversion) ---
        function sendToWhatsApp(e) {
            e.preventDefault();
            
            const name = document.getElementById('order-name').value;
            const city = document.getElementById('order-city').value;
            const phone = document.getElementById('order-phone').value;
            const variant = document.getElementById('selected-variant').value;
            const product = document.getElementById('p-title').innerText;
            const price = document.getElementById('p-price').innerText;

            // Format the message nicely
            const message = `*Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯ (New Order)* ğŸ“¦%0A%0A` +
                            `*Ø§Ù„Ù…Ù†ØªØ¬:* ${product}%0A` +
                            `*Ø§Ù„Ù†ÙˆØ¹/Ø§Ù„Ø¹Ø±Ø¶:* ${variant}%0A` +
                            `*Ø§Ù„Ø³Ø¹Ø±:* ${price}%0A` +
                            `------------------%0A` +
                            `*Ø§Ù„Ø§Ø³Ù…:* ${name}%0A` +
                            `*Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©:* ${city}%0A` +
                            `*Ø§Ù„Ù‡Ø§ØªÙ:* ${phone}`;

            const url = `https://wa.me/212600000000?text=${message}`; // Replace with your actual number
            window.open(url, '_blank');
        }

        // --- 5. VISUAL EFFECTS ---
        
        // Scroll Progress Bar
        window.onscroll = function() {
            var winScroll = document.body.scrollTop || document.documentElement.scrollTop;
            var height = document.documentElement.scrollHeight - document.documentElement.clientHeight;
            var scrolled = (winScroll / height) * 100;
            document.getElementById("scrollProgress").style.width = scrolled + "%";
        };

        // Zoom Effect
        const zoomContainer = document.getElementById("zoom-container");
        const img = document.getElementById("main-img");

        zoomContainer.addEventListener("mousemove", (e) => {
            const rect = zoomContainer.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;
            img.style.transformOrigin = `${x}px ${y}px`;
            img.style.transform = "scale(1.5)";
        });

        zoomContainer.addEventListener("mouseleave", () => {
            img.style.transformOrigin = "center center";
            img.style.transform = "scale(1)";
        });

        // Timer Logic
        setInterval(() => {
            const now = new Date();
            const end = new Date();
            end.setHours(23, 59, 59); 
            let diff = Math.floor((end - now) / 1000);
            if (diff < 0) diff = 0;
            const h = Math.floor(diff / 3600);
            const m = Math.floor((diff % 3600) / 60);
            const s = diff % 60;
            document.getElementById('countdown').innerText = 
                `${h.toString().padStart(2, '0')}:${m.toString().padStart(2, '0')}:${s.toString().padStart(2, '0')}`;
        }, 1000);

    </script>
</body>
</html>